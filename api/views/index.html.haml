%section#main
  %p This documentation assumes that you are familar with the low-level semantics of HTTP, including the use of tools like cURL, and JSON.
  
  %h1 Authentication
  %p A Poll Everywhere username and password is used to login to the API and manipulate polls on an account. These credentials can be created at <a href="http://www.polleverywhere.com/reserve">Poll Everywhere</a>.
  
  %p The credentials can be configured on the Poll Everywhere gem or manually via HTTP Basic authentication (More information on HTTP Basic credentials an encoding can be found at <a href="http://en.wikipedia.org/wiki/Basic_access_authentication">Wikipedia</a>).
  
  %pre.ruby
    :preserve
      PollEverywhere.config do
        username  "my_pollev_username"
        password  "my_pollev_password"
      end
  
  %h1 Its all JSON
  %p JSON key-value data structures are used throughout the API application to persist and modify data to the web application. Typically resources will include a root key that corresponds with the name of the name of the resource; from example, multiple choice polls all have the root key 'multiple_choice_poll'.

  %h1 Polls
  %h2 Multiple choice polls
  %p These polls are great for collecting structured information from audiences if you want to define a set of answers that participants may choose from.

  %h3 Attributes
  %dl.attributes
    %dt=PollEverywhere::MultipleChoicePoll.root_key
    %dd Root key for multiple choice poll data.
    %dd
      %dl
        -PollEverywhere::MultipleChoicePoll.props.each do |_, prop|
          %dt=prop.name
          %dd=prop.description
          -if prop.name == :options
            %dd
              %dl
                -PollEverywhere::MultipleChoicePoll::Option.props.each do |_, prop|
                  %dt=prop.name
                  %dd=prop.description
  
  %h3 Creating a multiple choice poll
  %p Specify a title and a few options to create a multiple choice poll.
  :example
    @mcp = PollEverywhere::MultipleChoicePoll.from_hash(:title => 'Hey dude!', :options => %w[red blue green]).save
  
  %h3 Changing the title of a multiple choice poll
  :example
    @mcp.title = "I like different titles"
    @mcp.save

  %h3 Starting and stopping multiple choice polls
  %p To prevent audience members from responding to a poll, change the poll state to "closed".
  :example
    @mcp.stop
  
  %p To open it back up and allow responses to come on through change the state to "opened".
  :example
    @mcp.start

  %h3 Delete a multiple choice poll
  %p When you're totally finished with the poll and you want to tidy things up a bit, you can delete polls
  :example
    @mcp.destroy
  
  %h2 Free text polls
  %p These polls are used to collect short answers or unstructured responses from participants.
  %h3 Attributes
  %dl.attributes
    %dt=PollEverywhere::FTP.root_key
    %dd Root key for free text poll data.
    %dd
      %dl
        -PollEverywhere::FTP.props.each do |_, prop|
          %dt=prop.name
          %dd=prop.description

  %h3 Create free text polls
  %p Creating a free text poll is similar to building a multiple choice poll, just without the options attribute.
  :example
    @ftp = PollEverywhere::FreeTextPoll.from_hash(:title => "What is the meaning of life?").save

  %h3 Modify a free text poll
  %p Change the title attribute to change the poll
  :example
    @ftp.title = "No really, what is the meaning of life?"
    @ftp.save

  %h3 Delete a free text poll
  :example
    @ftp.destroy
  
  %h1 Participants
  %p Participants are used to identify who is responding to your polls.    

  %h2 Attributes
  %dl.attributes
    %dt=PollEverywhere::Participant.root_key
    %dd Root key for participant data.
    %dd
      %dl
        -PollEverywhere::Participant.props.each do |_, prop|
          %dt=prop.name
          %dd=prop.description
  
  %h2 Creating a new Participant
  %p Specify the details of a new participant
  :example
    @participant = PollEverywhere::Participant.from_hash(:email => 'b.obama@whitehouse.gov', :first_name => 'Barack', :last_name => 'Obama', :password => 'mickeymouse', :responding_as => 'Barack').save
  
  %h2 Updating participant details
  :example
    @participant.first_name = "President"
    @participant.save

  %h2 Delete a Participant
  :example
    @participant.destroy
